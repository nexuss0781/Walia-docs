<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Walia Docs | Sovereign Spec</title>
    
    <!-- Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap');
        
        :root {
            --bg-base: #0a0b10; 
            --accent-blue: #6CABDD; /* Man City Blue */
            --reading-width: 820px;
            --sidebar-width: 280px;
        }

        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: var(--bg-base);
            color: #94a3b8;
            -webkit-user-select: none; user-select: none;
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* --- PROFESSIONAL SIDEBAR DESIGN --- */
        #sidebar {
            width: var(--sidebar-width);
            background-color: #050508;
            z-index: 100;
        }

        .category-label {
            font-size: 9px;
            font-weight: 800;
            color: #334155;
            letter-spacing: 0.35em;
            text-transform: uppercase;
            padding: 0 1.25rem;
            margin-bottom: 0.75rem;
        }

        .nav-btn {
            width: 100%;
            text-align: left;
            padding: 0.6rem 1.25rem;
            font-size: 11px;
            font-weight: 600;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: -0.01em;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 2px solid transparent;
        }

        .nav-btn:hover {
            color: var(--accent-blue);
            background: linear-gradient(90deg, rgba(108, 171, 221, 0.05) 0%, transparent 100%);
            border-left: 2px solid var(--accent-blue);
        }

        .active-link {
            color: var(--accent-blue) !important;
            background: linear-gradient(90deg, rgba(108, 171, 221, 0.08) 0%, transparent 100%);
            border-left: 2px solid var(--accent-blue) !important;
        }

        /* --- BLUR SYSTEM --- */
        #viewer-container {
            transition: filter 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s ease;
        }

        .viewer-blur {
            filter: blur(12px) brightness(0.4);
            pointer-events: none;
        }

        /* --- TYPOGRAPHY --- */
        #content-area {
            max-width: var(--reading-width);
            margin: 0 auto;
            font-size: 1.05rem;
            line-height: 1.85;
        }

        #content-area h1 { font-size: 3.5rem; font-weight: 800; color: var(--accent-blue); margin-bottom: 2rem; letter-spacing: -0.05em; line-height: 1.1; }
        #content-area h2 { font-size: 1.75rem; font-weight: 700; color: #fff; margin-top: 4rem; margin-bottom: 1.5rem; border-bottom: 1px solid rgba(108, 171, 221, 0.15); padding-bottom: 0.5rem; }
        #content-area p { margin-bottom: 1.8rem; color: #cbd5e1; }
        #content-area code { font-family: 'JetBrains Mono', monospace; background: rgba(108, 171, 221, 0.1); color: var(--accent-blue); padding: 0.2rem 0.4rem; border-radius: 4px; font-size: 0.85em; }
        #content-area pre { background: #050507 !important; border: 1px solid #1a1b23; padding: 1.5rem; border-radius: 12px; margin: 2.25rem 0; }

        /* --- NEXT/PREV NAVIGATOR --- */
        .doc-nav-container {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            margin-top: 6rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.05);
        }

        .doc-nav-card {
            flex: 1;
            padding: 1.5rem;
            background: #050508;
            border: 1px solid rgba(108, 171, 221, 0.1);
            border-radius: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            flex-direction: column;
        }

        .doc-nav-card:hover {
            border-color: var(--accent-blue);
            background: rgba(108, 171, 221, 0.03);
            transform: translateY(-2px);
        }

        .doc-nav-label { font-size: 10px; font-weight: 800; color: #475569; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 0.5rem; }
        .doc-nav-title { font-size: 13px; font-weight: 700; color: #f1f5f9; text-transform: uppercase; }

        /* General UI */
        .glow-trigger { animation: pulse-border 2s infinite; }
        @keyframes pulse-border {
            0% { box-shadow: 0 0 0 0 rgba(108, 171, 221, 0.5); }
            70% { box-shadow: 0 0 0 12px rgba(108, 171, 221, 0); }
            100% { box-shadow: 0 0 0 0 rgba(108, 171, 221, 0); }
        }
        
        ::-webkit-scrollbar { width: 3px; }
        ::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
    </style>
</head>
<body class="h-screen flex flex-col" onclick="dismissInitialGuide()">

    <!-- Splash Loader -->
    <div id="splash" class="fixed inset-0 bg-[#0a0b10] flex flex-col items-center justify-center z-[150] transition-opacity duration-1000">
        <img src="Walia.jpg" alt="Logo" class="w-48 h-48 object-contain mb-8 opacity-90">
        <div class="w-40 h-0.5 bg-slate-900 rounded-full overflow-hidden">
            <div id="load-bar" class="h-full bg-[#6CABDD] w-0 transition-all duration-1000"></div>
        </div>
    </div>

    <!-- Header (Always Visible) -->
    <header class="h-16 border-b border-white/5 bg-slate-950/40 backdrop-blur-md flex items-center justify-between px-8 z-[120]">
        <div class="flex items-center gap-4">
            <img src="Walia.jpg" class="h-10 w-10 object-contain opacity-80" alt="">
            <span class="text-[10px] font-black tracking-[0.4em] text-slate-600 uppercase hidden md:block italic">Sovereign Specification</span>
        </div>
        
        <div id="onboarding-guide" class="flex items-center gap-4 mr-4 hidden opacity-0 pointer-events-none">
            <div class="bg-slate-900/80 border border-[#6CABDD]/30 backdrop-blur-xl px-5 py-2 rounded-xl">
                <p class="text-[10px] font-black text-white uppercase tracking-[0.3em] animate-pulse">Initialize Directory</p>
            </div>
        </div>

        <button id="mobile-toggle" class="p-3 bg-slate-900/80 rounded-xl text-white transition-all glow-trigger border border-[#6CABDD]/20">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 6h16M4 12h16m-7 6h7"/></svg>
        </button>
    </header>

    <div class="flex flex-1 overflow-hidden relative">
        <!-- Sidebar -->
        <aside id="sidebar" class="absolute inset-y-0 right-0 bg-slate-950 border-l border-white/5 transform translate-x-full transition-all duration-400 ease-[cubic-bezier(0.4,0,0.2,1)] flex flex-col">
            <div class="py-8 overflow-y-auto flex-1 custom-scrollbar">
                <div id="nav-tree" class="space-y-10"></div>
            </div>
        </aside>

        <!-- Main Content -->
        <main id="viewer-container" class="flex-1 overflow-y-auto bg-transparent relative scroll-smooth order-first blur-md opacity-20">
            <div id="home-hero" class="min-h-full flex flex-col items-center justify-center py-20 px-6">
                <img src="Walia.jpg" class="w-64 h-64 object-contain mb-10 opacity-20 grayscale" alt="Walia">
                <div class="text-center max-w-xl">
                    <h1 class="text-3xl md:text-5xl font-black text-[#6CABDD] mb-6 tracking-tighter uppercase italic">Welcome to Walia</h1>
                    <p class="text-slate-500 text-sm leading-relaxed mb-10 font-medium">Access the sovereign documentation ecosystem. Encrypted modules await synchronization via the directory menu.</p>
                </div>
            </div>

            <div class="px-8 py-20">
                <article id="content-area" class="hidden opacity-0 transition-opacity duration-1000"></article>
                <!-- Navigator Hook -->
                <div id="doc-navigator" class="hidden max-w-[820px] mx-auto"></div>
            </div>
        </main>

        <!-- Mobile Overlay -->
        <div id="overlay" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-[90] hidden"></div>
    </div>

    <script>
        const MANIFEST_URL = 'docs/manifest.json';
        const DOCS_BASE = 'docs/';
        let flatFileList = []; // Used for Prev/Next tracking

        document.addEventListener('contextmenu', e => e.preventDefault());
        document.addEventListener('keydown', e => {
            if ((e.ctrlKey || e.metaKey) && ['s','c','u','p','a'].includes(e.key.toLowerCase())) e.preventDefault();
        });

        const splash = document.getElementById('splash');
        const guide = document.getElementById('onboarding-guide');
        const viewer = document.getElementById('viewer-container');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const homeHero = document.getElementById('home-hero');
        const contentArea = document.getElementById('content-area');
        const docNavigator = document.getElementById('doc-navigator');

        function toggleNav() {
            const isOpen = sidebar.classList.contains('translate-x-0');
            if (isOpen) {
                sidebar.classList.replace('translate-x-0', 'translate-x-full');
                viewer.classList.remove('viewer-blur');
                overlay.classList.add('hidden');
            } else {
                sidebar.classList.replace('translate-x-full', 'translate-x-0');
                viewer.classList.add('viewer-blur');
                overlay.classList.remove('hidden');
                dismissInitialGuide();
            }
        }

        function dismissInitialGuide() {
            guide.style.opacity = '0';
            guide.style.transform = 'translateY(-10px)';
            viewer.classList.remove('blur-md', 'opacity-20');
            document.getElementById('mobile-toggle').classList.remove('glow-trigger');
            setTimeout(() => guide.classList.add('hidden'), 400);
        }

        document.getElementById('mobile-toggle').onclick = (e) => { e.stopPropagation(); toggleNav(); };
        overlay.onclick = toggleNav;

        async function boot() {
            setTimeout(() => document.getElementById('load-bar').style.width = '100%', 100);
            try {
                const res = await fetch(MANIFEST_URL);
                const manifest = await res.json();
                
                // Flatten manifest for navigation
                flatFileList = [];
                for (const cat in manifest) { manifest[cat].forEach(path => flatFileList.push(path)); }
                
                renderSidebar(manifest);
                setTimeout(() => {
                    splash.style.opacity = '0';
                    setTimeout(() => {
                        splash.classList.add('hidden');
                        guide.classList.remove('hidden');
                        setTimeout(() => { guide.style.opacity = '1'; }, 50);
                    }, 1000);
                }, 2000);
            } catch (e) { console.error("Boot Error"); }
        }

        function renderSidebar(data) {
            const container = document.getElementById('nav-tree');
            container.innerHTML = '';
            for (const [category, files] of Object.entries(data)) {
                const group = document.createElement('div');
                group.innerHTML = `<h3 class="category-label">${category}</h3>`;
                const list = document.createElement('div');
                files.forEach(path => {
                    const btn = document.createElement('button');
                    btn.className = "nav-btn";
                    btn.innerText = cleanName(path);
                    btn.id = "btn-" + btoa(path).replace(/=/g, '');
                    btn.onclick = (e) => { e.stopPropagation(); loadDoc(path); };
                    list.appendChild(btn);
                });
                group.appendChild(list);
                container.appendChild(group);
            }
        }

        function cleanName(path) {
            return path.split('/').pop().replace('.md', '').replace(/^\d+_/, '').replace(/_/g, ' ');
        }

        async function loadDoc(path) {
            // Update Active State
            document.querySelectorAll('#nav-tree button').forEach(b => b.classList.remove('active-link'));
            const activeBtn = document.getElementById("btn-" + btoa(path).replace(/=/g, ''));
            if(activeBtn) activeBtn.classList.add('active-link');

            // UI Transitions
            sidebar.classList.replace('translate-x-0', 'translate-x-full');
            viewer.classList.remove('viewer-blur');
            overlay.classList.add('hidden');
            homeHero.classList.add('hidden');
            contentArea.classList.remove('hidden');
            docNavigator.classList.remove('hidden');
            setTimeout(() => contentArea.style.opacity = '1', 50);

            try {
                const res = await fetch(DOCS_BASE + path);
                const md = await res.text();
                contentArea.innerHTML = marked.parse(md);
                Prism.highlightAllUnder(contentArea);
                
                renderDocNavigator(path);
                viewer.scrollTo({top: 0, behavior: 'smooth'});
            } catch (e) { contentArea.innerHTML = "Sync Error."; }
        }

        function renderDocNavigator(currentPath) {
            const index = flatFileList.indexOf(currentPath);
            const prev = flatFileList[index - 1];
            const next = flatFileList[index + 1];

            docNavigator.innerHTML = `
                <div class="doc-nav-container">
                    ${prev ? `
                        <div class="doc-nav-card" onclick="loadDoc('${prev}')">
                            <span class="doc-nav-label">Previous Module</span>
                            <span class="doc-nav-title">← ${cleanName(prev)}</span>
                        </div>
                    ` : '<div class="flex-1"></div>'}
                    ${next ? `
                        <div class="doc-nav-card items-end text-right" onclick="loadDoc('${next}')">
                            <span class="doc-nav-label">Next Module</span>
                            <span class="doc-nav-title">${cleanName(next)} →</span>
                        </div>
                    ` : '<div class="flex-1"></div>'}
                </div>
            `;
        }

        boot();
    </script>
</body>
</html>
